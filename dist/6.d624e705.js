(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{297:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i});var a=n(25),r=function(){return Object(a.c)("medo-list")||[]},c=function(e){var t=e.list;return Object(a.c)("medo-list",t)},o=function(){return Object(a.c)("medo-cale")||{}},i=function(e){var t=e.data;return Object(a.c)("medo-cale",t)}},470:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){e.exports={layout:"src-pages-Medo-index-module__layout--2PD-U",empty:"src-pages-Medo-index-module__empty--2TRAC",title:"src-pages-Medo-index-module__title--2iz80",tips:"src-pages-Medo-index-module__tips--2a2CN",tag:"src-pages-Medo-index-module__tag--iikec"}},508:function(e,t,n){"use strict";n.r(t);n(83),n(276);var a=n(277),r=n.n(a),c=(n(135),n(41)),o=n.n(c),i=(n(42),n(367),n(380),n(307)),s=n.n(i),l=(n(282),n(308)),u=n.n(l),d=n(264),m=n.n(d),p=n(265),f=n.n(p),h=n(266),v=n.n(h),C=n(267),b=n.n(C),y=n(268),E=n.n(y),k=n(1),g=n.n(k),x=n(272),N=n.n(x),O=n(86),j=n.n(O),w=(n(390),n(392)),D=n.n(w),R=n(311),P=n.n(R),I=(n(394),n(396)),S=n.n(I),A=(n(400),n(287)),T=n.n(A),_=n(270),M=n.n(_),U=n(122),V=n.n(U),z=n(410),F=n.n(z),J=n(424),B=n.n(J),K=n(318),L=n.n(K),W=n(275),q=n.n(W),G=n(452),H=n.n(G),Q=n(6),X=n.n(Q),Y=n(453),Z=n.n(Y),$=n(457),ee=n.n($),te=n(283),ne=n.n(te),ae=Z()(),re=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=v()(this,(e=b()(t)).call.apply(e,[this].concat(r)))).state={},n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=ae.listen(function(){return e.destory()})}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.props,t=e.onOk,n=e.onCancel,a=e.transition,r=e.render,c=e.content,o=e.component,i=e.title,s=e.titleRender,l=e.footerRender,u=e.props,d=M()(e,["onOk","onCancel","transition","render","content","component","title","titleRender","footerRender","props"]),m=T()({visible:!0,onOk:t.bind(this),onCancel:n.bind(this),title:i},u,d);H()(a)&&!a&&(m=T()({},m,{transitionName:"",maskTransitionName:""})),q()(s)&&(m=T()({},m,{title:s.apply(this)||i})),q()(l)&&(m=T()({},m,{footer:l.apply(this)}));var p=c;return!p&&o&&(p=g.a.createElement(o,d)),!p&&r&&(p=r.bind(this)(this)),g.a.createElement(S.a,m,p)}}]),t}(k.PureComponent);re.open=function(e){var t=e,n=P()({},t);e=L()({title:"弹窗",delay:0,setPropsMerged:!0,autoClose:!0,maskClosable:!1,transition:!1,onOk:function(){this.props.onSubmit.bind(this)(),this.destroy()},onCancel:function(){this.destroy()},redner:B.a},n),setTimeout(function(){var t=document.createElement("div"),n=e.setPropsMerged,a=F()(e,q.a),r=(a.render,M()(a,["render"])),c=re;c=function(e){return function(t){function n(){return m()(this,n),v()(this,b()(n).apply(this,arguments))}return E()(n,t),f()(n,[{key:"render",value:function(){var t=T()({},this.props),n=t.getInstance;return q()(n)&&(t.ref=n),g.a.createElement(e,t)}}]),n}(k.PureComponent)}(c),c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return function(n){function a(){var t,n;m()(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(n=v()(this,(t=b()(a)).call.apply(t,[this].concat(c)))).state={},n.setProps=function(t){var a=ne()(ne()(n)).state;n.setState(e?L()({},a,t):T()({},a,t))},n.forceUpdateProps=function(){n.forceUpdate()},n}return E()(a,n),f()(a,[{key:"render",value:function(){var n=this.setProps,a=this.forceUpdateProps,r=this.props,c=this.state,o={setProps:n,forceUpdateProps:a},i=e?L()({},r,c,o):T()({},r,c,o);return g.a.createElement(t,i)}}]),a}(k.PureComponent)}}(n)(c),document.body.appendChild(t),X.a.render(g.a.createElement(D.a,{locale:ee.a},g.a.createElement(c,N()({},e,{getInstance:function(n){if(n){L()(n,{destroy:function(){var e=n.onDestroy;q()(e)&&e(),X.a.unmountComponentAtNode(t),document.body.removeChild(t)}}),V()(r,function(e,t){n[t]=e.bind(n)});var a=e.state;a&&n.setState(a),n.props.forceUpdateProps()}}}))),t)},e.delay)};var ce=n(273),oe=n.n(ce),ie=(n(461),n(21)),se=n.n(ie),le=(n(293),n(294)),ue=n.n(le),de=ue.a.TextArea,me=function(e){var t=e.prefixCls,n=e.type,a=e.value,r=e.onConfirm,c=e.onChange,o=M()(e,["prefixCls","type","value","onConfirm","onChange"]),i="textarea"===n?de:ue.a,s=Object(k.useRef)(null);Object(k.useEffect)(function(){s&&s.current&&s.current.focus()},[]);var l=Object(k.useCallback)(function(){r&&r()},[r]),u=Object(k.useCallback)(function(e){e&&e.target&&"string"==typeof e.target.value&&c&&c(e.target.value)},[c]);return g.a.createElement("div",N()({className:"".concat(t,"-textarea")},o),g.a.createElement(i,{ref:s,value:a,onBlur:l,onChange:u,onPressEnter:l}))},pe=(n(470),"medo-text-edit"),fe=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=v()(this,(e=b()(t)).call.apply(e,[this].concat(r)))).state={isEdit:!1,current:""},n.onEditChange=function(e){if(e&&"string"==typeof e)n.setState({isEdit:!n.state.isEdit,current:e});else{if(e)return void n.setState({isEdit:!n.state.isEdit});n.setState({isEdit:!n.state.isEdit}),e=n.state.current}if(e!==n.state.prevValue){var t=n.props.onConfirm;t&&t(e)}},n.onValueChange=function(e){var t=n.props.onChange;n.setState({current:e},function(){t&&t(e)})},n.setContentRef=function(e){n.contentRef=e},n.contentRender=function(){var e=ne()(ne()(n)),t=e.props,a=t.type,r=t.bold,c=t.children,i=t.placeholder,s=e.state,l=s.isEdit,u=s.current,d=e.onEditChange,m=e.onValueChange,p=e.setContentRef;return l?g.a.createElement(me,{prefixCls:pe,type:a||"input",value:u,onChange:m,onConfirm:d}):g.a.createElement("div",{ref:p,className:"".concat(pe,"-content")},u?g.a.createElement("span",{className:se()(oe()({},"".concat(pe,"-bold"),r))},u):g.a.createElement("span",{className:se()("".concat(pe,"-placeholder"))},i||"请编辑文本内容"),g.a.createElement(o.a,{onClick:d,className:"".concat(pe,"-options"),type:"edit"}),g.a.Children.map(c,function(e,t){return g.a.cloneElement(e,{className:"".concat(pe,"-options")})}))},n}return E()(t,e),f()(t,[{key:"render",value:function(){return g.a.createElement("div",{className:"".concat(pe,"-layout")},this.contentRender())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevValue,a=e.value,r={prevValue:a};return n!==a&&(r.current=a),r}}]),t}(g.a.PureComponent),he=function(e){var t=e.onDelete,n=e.prefixCls,a=M()(e,["onDelete","prefixCls"]);return g.a.createElement("div",{className:"".concat(n,"-input")},g.a.createElement(fe,a,t&&g.a.createElement(o.a,{type:"delete",onClick:t})))},ve={marginRight:8},Ce=function(e){var t=e.prefixCls,n=e.text,a=M()(e,["prefixCls","text"]);return g.a.createElement("div",N()({className:"".concat(t,"-add")},a),n&&g.a.createElement("span",{style:ve},n),g.a.createElement(o.a,{type:"plus-circle"}))},be=(n(139),n(87)),ye=n.n(be),Ee=function(e){var t=e.item,n=t.name,a=t.remarks,r=e.onTextChange,c=e.onItemDelete,i=e.onRemarksChange,s=e.prefixCls,l=(M()(e,["item","onTextChange","onItemDelete","onRemarksChange","prefixCls"]),g.a.createElement("span",null,"点击添加备注")),u=!1;return a&&a.length>0&&(u=!0,l=a.map(function(e,t){return g.a.createElement("div",{key:t},e)})),g.a.createElement("div",{className:"".concat(s,"-sub")},g.a.createElement("div",{className:"".concat(s,"-prefix")},g.a.createElement(ye.a,{content:l,placement:"left"},g.a.createElement(o.a,{className:se()(oe()({},"".concat(s,"-prefix-work"),u)),type:"appstore",theme:"filled",onClick:i}))),g.a.createElement(he,{prefixCls:s,value:n,onConfirm:r,onDelete:c}))},ke=(n(329),n(330)),ge=n.n(ke),xe=n(296),Ne=n.n(xe),Oe=function(e){var t=e.onClick,n=e.list,a=Object(k.useState)(""),r=j()(a,2),c=r[0],i=r[1],s=Object(k.useState)(n),l=j()(s,2),u=l[0],d=l[1],m=Object(k.useCallback)(function(){var e;e=[].concat(Ne()(u),[c]),i(""),d(e),t(e)},[t,u]),p=Object(k.useCallback)(function(e){var n=u;n.splice(e,1),d(Ne()(n)),t(n)},[t,u]);return g.a.createElement(g.a.Fragment,null,u.length<5&&g.a.createElement(ue.a,{size:"small",value:c,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){13===e.keyCode&&m(u)},placeholder:"请输入任务备注，最多保存五项。",addonAfter:g.a.createElement(o.a,{type:"enter",onClick:m})}),u.map(function(e,t){return g.a.createElement("div",{key:t,style:{marginTop:10}},t+1,g.a.createElement(ge.a,{type:"vertical"}),e,g.a.createElement(o.a,{type:"delete",onClick:function(){return p(t)},style:{marginLeft:10}}))}))},je=(n(482),["一","二","三","四","五","六","七","八","九","十"]),we={padding:15},De=function(e){var t=e.index,n=e.name,a=e.list,c=e.onChange,i=Object(k.useState)(a.length>=7),s=j()(i,2),l=s[0],u=s[1],d=Object(k.useCallback)(function(){u(!l)},[l]),m=Object(k.useCallback)(function(){u(!1),c&&c(0,{index:t})},[c,t]),p=Object(k.useCallback)(function(){c&&c(2,{index:t})},[c,t]),f=Object(k.useCallback)(function(e){c&&c(1,{index:t,target:e})},[c,t]),h=Object(k.useCallback)(function(e,n){c&&c(1,{index:t,childrenIndex:n,target:e})},[c,t]),v=Object(k.useCallback)(function(e){c&&c(2,{index:t,childrenIndex:e})},[c,t]),C=Object(k.useCallback)(function(e){if(c){var n={list:a[e].remarks,onClick:function(n){c(3,{index:t,childrenIndex:e,target:n})}};re.open({titleRender:function(){return g.a.createElement("div",null,g.a.createElement(o.a,{type:"appstore"})," 任务备注")},transition:!0,content:g.a.createElement(Oe,n),maskClosable:!0,footerRender:function(){return null}})}},[c,t]);return g.a.createElement(r.a,{hoverable:!0,bodyStyle:we},g.a.createElement("div",{className:"".concat("medo-item-box","-layout")},g.a.createElement("div",{className:"".concat("medo-item-box","-title-index ").concat("medo-item-box","-bold")},je[t],"、"),g.a.createElement(he,{bold:!0,prefixCls:"medo-item-box",value:n,onConfirm:f})),!l&&a.map(function(e,t){return g.a.createElement(Ee,{key:t,prefixCls:"medo-item-box",item:e,onTextChange:function(e){return h(e,t)},onRemarksChange:function(){return C(t)},onItemDelete:function(){return v(t)}})}),g.a.createElement("div",{className:"".concat("medo-item-box","-options")},g.a.createElement(o.a,{type:"up-circle",onClick:d,className:"".concat("medo-item-box","-options-icon"),style:{transform:l&&"rotate(180deg)"}}),g.a.createElement(o.a,{type:"plus-circle",onClick:m,className:"".concat("medo-item-box","-options-icon")}),g.a.createElement(o.a,{type:"delete",onClick:p,className:"".concat("medo-item-box","-options-icon")})))};De.Add=function(e){return g.a.createElement(Ce,N()({prefixCls:"medo-item-box"},e))};var Re=De,Pe=n(25),Ie=n(297),Se=n(483),Ae=n.n(Se),Te=["分层级","备忘录","任务指标","细化任务"],_e=Re.Add,Me=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=v()(this,(e=b()(t)).call.apply(e,[this].concat(c)))).state={targetIndex:-1,data:[],set:[],map:{}},n.getData=u()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,Object(Ie.b)();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1);case 10:return e.prev=10,n.setState({data:t}),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[1,7,10,13]])})),n.setData=function(){var e=u()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ie.d)({list:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.formatData=function(e){e||(e=n.state.data);var t=[],a={};e.forEach(function(e){t.push(e.id),a[e.id]=e}),n.setState({set:t,map:a})},n.handleNotepadItem=function(e,t){var a=t.index,r=t.childrenIndex,c=t.target,o=n.state.data;switch(e){case 0:void 0!==a?o[a].children.push({name:"",createTime:new Date,remarks:[]}):o.push({id:Object(Pe.b)(),name:"",createTime:new Date,children:[]});break;case 1:void 0!==r?o[a].children[r].name=c:o[a].name=c;break;case 2:void 0!==r?o[a].children.splice(r,1):o.splice(a,1);break;case 3:o[a].children[r].remarks=c}n.setState({data:o},function(){n.setData(o)})},n.addNewItem=function(){n.handleNotepadItem(0,{})},n.emptyRender=function(){return g.a.createElement(r.a,{className:Ae.a.empty},g.a.createElement("div",{className:Ae.a.title},"思维导图式待办事项"),Te.map(function(e,t){return g.a.createElement("div",{key:t,className:Ae.a.tag},e)}),g.a.createElement("div",{className:Ae.a.tips},"立刻开始记事之旅 ",g.a.createElement(o.a,{type:"caret-down"})))},n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state.data;return g.a.createElement("div",{className:Ae.a.layout},t.map(function(t,n){return g.a.createElement(Re,{key:t.id,index:n,name:t.name,list:t.children,onChange:e.handleNotepadItem})}),0===t.length&&this.emptyRender(),g.a.createElement(_e,{onClick:this.addNewItem}))}}]),t}(k.Component);t.default=Me}}]);
//# sourceMappingURL=6.d624e705.js.map