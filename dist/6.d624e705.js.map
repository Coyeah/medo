{"version":3,"sources":["webpack:///./src/services/index.ts","webpack:///./src/pages/Medo/index.module.less?f21a","webpack:///./src/components/Dialog/index.js","webpack:///./src/decorators/withRef.js","webpack:///./src/decorators/withSetProps.js","webpack:///./src/components/TextEdit/Editor.tsx","webpack:///./src/components/TextEdit/index.tsx","webpack:///./src/components/Notepad/WrappedTextEdit.tsx","webpack:///./src/components/Notepad/AddIcon.tsx","webpack:///./src/components/Notepad/Item.tsx","webpack:///./src/components/Notepad/Remarks.tsx","webpack:///./src/components/Notepad/index.tsx","webpack:///./src/pages/Medo/index.tsx"],"names":["__webpack_require__","d","__webpack_exports__","queryListData","updateListData","queryCaleData","updateCaleDate","_utils__WEBPACK_IMPORTED_MODULE_0__","storage","_ref","list","_ref2","data","module","exports","layout","empty","title","tips","tag","history","createBrowserHistory","Dialog","state","_this2","this","unsubscribe","listen","destory","_this$props","props","onOk","onCancel","transition","render","content","BodyComponent","component","titleRender","footerRender","restProps","objectWithoutProperties_default","modalProps","objectSpread_default","visible","bind","isBoolean_default","transitionName","maskTransitionName","isFunction_default","apply","footer","body","reactfrom_dll_reference_dll_reactDOM_library_default","a","createElement","modal_default","PureComponent","open","options","_options","restOptions","assign_default","merge_default","delay","setPropsMerged","autoClose","maskClosable","onSubmit","destroy","redner","noop_default","setTimeout","container","document","_pickBy2","pickBy_default","methods","WrappedComponent","_PureComponent","WithRef","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","arguments","inherits_default","createClass_default","key","value","getInstance","ref","withRef","merge","length","undefined","WithSetProps","_getPrototypeOf2","_this","_len","args","Array","_key","call","concat","setProps","assertThisInitialized_default","setState","forceUpdateProps","forceUpdate","mergeStateToProps","withSetProps","appendChild","ReactDOM","locale_provider_default","locale","zhCN","extends_default","instance","onDestroy","unmountComponentAtNode","removeChild","forEach_default","method","TextArea","Editor","prefixCls","type","onConfirm","onChange","Wrapped","input_default","inputRef","useRef","useEffect","current","focus","onInputBlur","useCallback","onInputChange","e","target","className","onBlur","onPressEnter","TextEdit","isEdit","onEditChange","prevValue","onValueChange","setContentRef","el","contentRef","contentRender","_assertThisInitialize","_assertThisInitialize2","bold","children","placeholder","_assertThisInitialize3","TextEdit_Editor","classnames","defineProperty_default","icon_default","onClick","React","Children","map","child","cloneElement","nextProps","prevState","newState","WrappedTextEdit","onDelete","src_components_TextEdit","textStyle","marginRight","AddIcon","text","style","Item","_props$item","item","name","remarks","onTextChange","onItemDelete","onRemarksChange","hasRemarks","index","popover_default","placement","theme","Notepad_WrappedTextEdit","Remarks","propsOnClick","propsList","_useState","useState","_useState2","slicedToArray_default","inputValue","setInputValue","_useState3","_useState4","setList","newList","toConsumableArray_default","splice","Fragment","size","onKeyDown","keyCode","addonAfter","marginTop","divider_default","marginLeft","indexMap","cardBodyStyle","padding","Notepad","isFold","setIsFold","handleFold","addItem","delItem","onItemTextChange","childrenIndex","remarksProps","Notepad_Remarks","card_default","hoverable","bodyStyle","val","ind","Notepad_Item","transform","Add","Notepad_AddIcon","tags","Medo","targetIndex","set","getData","_callee","regenerator_default","wrap","_context","prev","next","sent","t0","finish","stop","setData","_callee2","_context2","formatData","forEach","push","id","handleNotepadItem","flag","_ref3","createTime","Date","generateUUID","addNewItem","emptyRender","styles","src_components_Notepad","Component"],"mappings":"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","file":"6.d624e705.js","sourcesContent":["import {storage, generateUUID} from '@/utils';\r\n\r\nexport const queryListData = () => {\r\n  return storage('medo-list') || [];\r\n}\r\n\r\nexport const updateListData = ({list}) => {\r\n  return storage('medo-list', list);\r\n}\r\n\r\nexport const queryCaleData = () => {\r\n  return storage('medo-cale') || {};\r\n}\r\n\r\nexport const updateCaleDate = ({data}) => {\r\n  return storage('medo-cale', data);\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"src-pages-Medo-index-module__layout--2PD-U\",\"empty\":\"src-pages-Medo-index-module__empty--2TRAC\",\"title\":\"src-pages-Medo-index-module__title--2iz80\",\"tips\":\"src-pages-Medo-index-module__tips--2a2CN\",\"tag\":\"src-pages-Medo-index-module__tag--iikec\"};","import React, { PureComponent } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { LocaleProvider, Modal } from 'antd';\r\nimport _ from 'lodash';\r\nimport createBrowserHistory from 'history/createBrowserHistory';\r\nimport zhCN from 'antd/lib/locale-provider/zh_CN';\r\nimport withRef from '../../decorators/withRef';\r\nimport withSetProps from '../../decorators/withSetProps';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default class Dialog extends PureComponent {\r\n  state = {};\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe = history.listen(() => this.destory());\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) this.unsubscribe();\r\n  }\r\n\r\n  render() {\r\n    const { onOk, onCancel, transition, render, content, component: BodyComponent, title, titleRender, footerRender, props, ...restProps} = this.props;\r\n    let modalProps = {\r\n      // wrapClassName: styles.center,\r\n      visible: true,\r\n      onOk: onOk.bind(this),\r\n      onCancel: onCancel.bind(this),\r\n      title,\r\n      ...props,\r\n      ...restProps\r\n    };\r\n    if (_.isBoolean(transition) && !transition) {\r\n      modalProps = { ...modalProps, transitionName: '', maskTransitionName: '' };\r\n    }\r\n    if (_.isFunction(titleRender)) {\r\n      modalProps = { ...modalProps, title: titleRender.apply(this) || title };\r\n    }\r\n    if (_.isFunction(footerRender)) {\r\n      modalProps = { ...modalProps, footer: footerRender.apply(this) };\r\n    }\r\n    let body = content;\r\n    if (!body && BodyComponent) {\r\n      body = <BodyComponent {...restProps} />;\r\n    }\r\n    if (!body && render) {\r\n      body = render.bind(this)(this);\r\n    }\r\n    return <Modal {...modalProps}>{body}</Modal>;\r\n  }\r\n}\r\n\r\nDialog.open = (options) => {\r\n  const { ...restOptions } = options;\r\n  options = _.merge({\r\n    title: '弹窗',\r\n    delay: 0,\r\n    setPropsMerged: true,\r\n    autoClose: true,\r\n    maskClosable: false,\r\n    transition: false,\r\n    onOk() {\r\n      this.props.onSubmit.bind(this)();\r\n      this.destroy();\r\n    },\r\n    onCancel() {\r\n      this.destroy();\r\n    },\r\n    redner: _.noop\r\n  }, restOptions);\r\n  setTimeout(() => {\r\n    const container = document.createElement('div');\r\n    const { setPropsMerged } = options;\r\n    const { render, ...methods } = _.pickBy(options, _.isFunction);\r\n    const saveRef = instance => {\r\n      if (instance) {\r\n        _.merge(instance, {\r\n          destroy() {\r\n            const { onDestroy } = instance;\r\n            _.isFunction(onDestroy) && onDestroy();\r\n            ReactDOM.unmountComponentAtNode(container);\r\n            document.body.removeChild(container);\r\n          }\r\n        });\r\n        _.forEach(methods, (method, key) => {\r\n          instance[key] = method.bind(instance);\r\n        });\r\n        const { state } = options;\r\n        state && instance.setState(state);\r\n        instance.props.forceUpdateProps();\r\n      }\r\n    };\r\n\r\n    let WrappedComponent = Dialog;\r\n    WrappedComponent = withRef(WrappedComponent);\r\n    WrappedComponent = withSetProps(setPropsMerged)(WrappedComponent);\r\n\r\n    document.body.appendChild(container);\r\n    ReactDOM.render((\r\n      <LocaleProvider locale={zhCN}>\r\n        <WrappedComponent {...options} getInstance={saveRef} />\r\n      </LocaleProvider>\r\n    ), container);\r\n  }, options.delay);\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport _ from 'lodash';\r\n\r\nexport default WrappedComponent => class WithRef extends PureComponent {\r\n  render() {\r\n    const props = { ...this.props };\r\n    const { getInstance } = props;\r\n    if (_.isFunction(getInstance)) {\r\n      props.ref = getInstance;\r\n    }\r\n    return <WrappedComponent {...props} />;\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport _ from 'lodash';\r\n\r\nexport default (merge = true) => WrappedComponent => class WithSetProps extends PureComponent {\r\n  state = {};\r\n\r\n  setProps = props => {\r\n    const { state } = this;\r\n    // merge 是在两个对象遇到相同属性时，如果属性值为纯对象或集合时，则把两个属性值和合并而并不覆盖。\r\n    this.setState(merge ? _.merge({}, state, props) : {...state, ...props});\r\n  };\r\n\r\n  forceUpdateProps = () => {\r\n    this.forceUpdate();\r\n  };\r\n\r\n  render() {\r\n    const { setProps, forceUpdateProps, props, state } = this;\r\n    const methods = { setProps, forceUpdateProps };\r\n    const mergeStateToProps = merge ? _.merge({}, props, state, methods) : { ...props, ...state, ...methods};\r\n    return <WrappedComponent {...mergeStateToProps} />\r\n  }\r\n}\r\n","import React, {\r\n  useState, useRef, useEffect, useCallback,\r\n} from 'react';\r\nimport {Input} from 'antd';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst Editor: React.FC = (props: object): React.ReactElement => {\r\n  const {prefixCls, type, value, onConfirm, onChange, ...restProps} = props;\r\n  const Wrapped = type === 'textarea' ? TextArea : Input;\r\n  const inputRef = useRef(null);\r\n  useEffect(() => {\r\n    if (inputRef && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, []);\r\n  const onInputBlur = useCallback(() => {\r\n    onConfirm && onConfirm();\r\n  }, [onConfirm]);\r\n  const onInputChange = useCallback(e => {\r\n    if (e && e.target && typeof e.target.value === 'string') onChange && onChange(e.target.value);\r\n  }, [onChange]);\r\n  return (\r\n    <div className={`${prefixCls}-textarea`} {...restProps}>\r\n      <Wrapped\r\n        ref={inputRef}\r\n        value={value}\r\n        onBlur={onInputBlur}\r\n        onChange={onInputChange}\r\n        onPressEnter={onInputBlur}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Editor;\r\n\r\n// class Editor extends React.PureComponent {\r\n//\r\n//   componentDidMount() {\r\n//     if (this.inputRef) {\r\n//       this.inputRef.focus();\r\n//     }\r\n//   }\r\n//\r\n//   setInputRef = el => {\r\n//     this.inputRef = el;\r\n//   }\r\n//\r\n//   onInputBlur = () => {\r\n//     const {onConfirm} = this.props;\r\n//     onConfirm && onConfirm();\r\n//   }\r\n//\r\n//   onInputChange = e => {\r\n//     if (e && e.target && e.target.value) {\r\n//       const {onChange} = this.props;\r\n//       onChange && onChange(e.target.value);\r\n//     }\r\n//   }\r\n//\r\n//   render() {\r\n//     const {type, value} = this.props;\r\n//     const Wrapped = type === 'textarea' ? TextArea : Input;\r\n//\r\n//     return (\r\n//       <div className={styles['text-edit-textarea']}>\r\n//         <Wrapped\r\n//           ref={this.setInputRef}\r\n//           onBlur={this.onInputBlur}\r\n//           value={value}\r\n//           onChange={this.onInputChange}\r\n//         />\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\n","import React, {Fragment} from 'react';\r\nimport {Icon} from 'antd';\r\nimport classnames from 'classnames';\r\nimport Editor from './Editor';\r\nimport './index.less';\r\n\r\nconst prefixCls = 'medo-text-edit';\r\n\r\nclass TextEdit extends React.PureComponent {\r\n  state = {\r\n    isEdit: false,\r\n    current: ''\r\n  }\r\n\r\n  static getDerivedStateFromProps (nextProps, prevState) {\r\n    const { prevValue } = prevState;\r\n    const { value } = nextProps;\r\n    const newState = {\r\n      prevValue: value,\r\n    };\r\n    if (prevValue !== value) {\r\n      newState.current = value;\r\n    }\r\n    return newState;\r\n  }\r\n\r\n  onEditChange = value => {\r\n    if (value && typeof value === 'string') {\r\n      this.setState({\r\n        isEdit: !this.state.isEdit,\r\n        current: value,\r\n      });\r\n    } else if (!!value) {\r\n      this.setState({ isEdit: !this.state.isEdit });\r\n      return;\r\n    } else {\r\n      this.setState({ isEdit: !this.state.isEdit });\r\n      value = this.state.current;\r\n    }\r\n    const {prevValue} = this.state;\r\n    if (value !== prevValue) {\r\n      const {onConfirm} = this.props;\r\n      onConfirm && onConfirm(value);\r\n    }\r\n  }\r\n\r\n  onValueChange = value => {\r\n    const {onChange} = this.props;\r\n    this.setState({current: value}, () => {\r\n      onChange && onChange(value);\r\n    });\r\n  }\r\n\r\n  setContentRef = el => {\r\n    this.contentRef = el;\r\n  }\r\n\r\n  contentRender = () => {\r\n    const {\r\n      props: {type, bold, children, placeholder},\r\n      state: {isEdit, current},\r\n      onEditChange, onValueChange, setContentRef\r\n    } = this;\r\n    if (isEdit) {\r\n      return (\r\n        <Editor\r\n          prefixCls={prefixCls}\r\n          type={type || 'input'}\r\n          value={current}\r\n          onChange={onValueChange}\r\n          onConfirm={onEditChange}\r\n        />\r\n      )\r\n    } else {\r\n      return (\r\n        <div ref={setContentRef} className={`${prefixCls}-content`}>\r\n          {\r\n            current ? (\r\n              <span className={classnames({[`${prefixCls}-bold`]: bold})}>{current}</span>\r\n            ) : (\r\n              <span className={classnames(`${prefixCls}-placeholder`)}>{placeholder || `请编辑文本内容`}</span>\r\n            )\r\n          }\r\n          <Icon onClick={onEditChange} className={`${prefixCls}-options`} type=\"edit\" />\r\n          {React.Children.map(children, (child, key) =>\r\n            React.cloneElement(child, {\r\n              className: `${prefixCls}-options`\r\n            })\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={`${prefixCls}-layout`}>\r\n        {this.contentRender()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default TextEdit;\r\n","import React from 'react';\r\nimport {Icon} from 'antd';\r\nimport TextEdit from '@/components/TextEdit';\r\n\r\nconst WrappedTextEdit: React.FC = (props: object): React.ReactElement => {\r\n  const {onDelete, prefixCls, ...restProps} = props;\r\n  return (\r\n    <div className={`${prefixCls}-input`}>\r\n      <TextEdit {...restProps}>\r\n        {onDelete && (\r\n          <Icon type=\"delete\" onClick={onDelete} />\r\n        )}\r\n      </TextEdit>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default WrappedTextEdit;\r\n","import React from 'react';\r\nimport {Icon} from 'antd';\r\n\r\nconst textStyle = {marginRight: 8};\r\n\r\nconst AddIcon: React.FC = (props: object): React.ReactElement => {\r\n  const {prefixCls, text, ...restProps} = props;\r\n  return (\r\n    <div className={`${prefixCls}-add`} {...restProps}>\r\n      {text && (<span style={textStyle}>{text}</span>)}\r\n      <Icon type=\"plus-circle\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddIcon;\r\n","import React, {useCallback} from 'react';\r\nimport {Row, Col, Popover, Icon} from 'antd';\r\nimport classnames from 'classnames';\r\nimport TextEdit from './WrappedTextEdit';\r\n\r\nconst Item: React.FC = (props: object): React.ReactElement => {\r\n  const {item: {name, remarks}, onTextChange, onItemDelete, onRemarksChange, prefixCls, ...restProps} = props;\r\n  let content = (<span>点击添加备注</span>),\r\n    hasRemarks = false;\r\n  if (remarks && remarks.length > 0) {\r\n    hasRemarks = true;\r\n    content = remarks.map((value, index) => (\r\n      <div key={index}>{value}</div>\r\n    ))\r\n  }\r\n  return (\r\n    <div className={`${prefixCls}-sub`}>\r\n      <div className={`${prefixCls}-prefix`}>\r\n        <Popover content={content} placement=\"left\">\r\n          <Icon\r\n            className={classnames({[`${prefixCls}-prefix-work`]: hasRemarks})}\r\n            type=\"appstore\"\r\n            theme=\"filled\"\r\n            onClick={onRemarksChange}\r\n          />\r\n        </Popover>\r\n      </div>\r\n      <TextEdit\r\n        prefixCls={prefixCls}\r\n        value={name}\r\n        onConfirm={onTextChange}\r\n        onDelete={onItemDelete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Item;\r\n","import React, {\r\n  useState, useRef, useCallback\r\n} from 'react';\r\nimport {Input, Icon, Divider} from 'antd';\r\n\r\nconst Remarks: React.FC = (props: object): React.ReactElement => {\r\n  const {onClick: propsOnClick, list: propsList} = props;\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [list, setList] = useState(propsList);\r\n  const keyDownHandler = e => {\r\n    if (e.keyCode === 13) onClick(list);\r\n  }\r\n  const onClick = useCallback(() => {\r\n    let newList = list;\r\n    newList = [...list, inputValue];\r\n    setInputValue('');\r\n    setList(newList);\r\n    propsOnClick(newList);\r\n  }, [propsOnClick, list]);\r\n  const onDelete = useCallback(index => {\r\n    let newList = list;\r\n    newList.splice(index, 1);\r\n    setList([...newList]);\r\n    propsOnClick(newList);\r\n  }, [propsOnClick, list]);\r\n  return (\r\n    <>\r\n      {list.length < 5 && (\r\n        <Input\r\n        size=\"small\"\r\n        value={inputValue}\r\n        onChange={e => setInputValue(e.target.value)}\r\n        onKeyDown={keyDownHandler}\r\n        placeholder='请输入任务备注，最多保存五项。'\r\n        addonAfter={\r\n          <Icon type=\"enter\" onClick={onClick} />\r\n        }\r\n        />\r\n      )}\r\n      {list.map((value, index) => (\r\n        <div key={index} style={{marginTop: 10}}>\r\n          {index + 1}\r\n          <Divider type=\"vertical\" />\r\n          {value}\r\n          <Icon type=\"delete\" onClick={() => onDelete(index)} style={{marginLeft: 10}} />\r\n        </div>\r\n      ))}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Remarks;\r\n","import React, {\r\n  useCallback, useState,\r\n} from 'react';\r\nimport {Card, Icon} from 'antd';\r\nimport classnames from 'classnames';\r\nimport Dialog from '@/components/Dialog';\r\nimport TextEdit from './WrappedTextEdit';\r\nimport AddIcon from './AddIcon';\r\nimport Item from './Item';\r\nimport Remarks from './Remarks';\r\nimport './index.less';\r\n\r\nconst prefixCls = 'medo-item-box',\r\n  indexMap = ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十'],\r\n  cardBodyStyle = {padding: 15};\r\n\r\nconst Notepad: React.FC = (props: object): React.ReactElement => {\r\n  const {\r\n    index, name, list,\r\n    onChange,\r\n  } = props;\r\n  const [isFold, setIsFold] = useState(list.length >= 7);\r\n  const handleFold = useCallback(() => {\r\n    setIsFold(!isFold);\r\n  }, [isFold]);\r\n  const addItem = useCallback(() => {\r\n    setIsFold(false);\r\n    onChange && onChange(0, {index});\r\n  }, [onChange, index]);\r\n  const delItem = useCallback(() => {\r\n    onChange && onChange(2, {index});\r\n  }, [onChange, index]);\r\n  const onTextChange = useCallback(value => {\r\n    onChange && onChange(1, {index, target: value})\r\n  }, [onChange, index]);\r\n  const onItemTextChange = useCallback((value, childrenIndex) => {\r\n    onChange && onChange(1, {index, childrenIndex, target: value})\r\n  }, [onChange, index]);\r\n  const onItemDelete = useCallback((childrenIndex) => {\r\n    onChange && onChange(2, {index, childrenIndex});\r\n  }, [onChange, index]);\r\n  const onRemarksChange = useCallback((childrenIndex) => {\r\n    if (!onChange) return;\r\n    const remarksProps = {\r\n      list: list[childrenIndex].remarks,\r\n      onClick: newList => {\r\n        onChange(3, {index, childrenIndex, target: newList})\r\n      }\r\n    }\r\n    Dialog.open({\r\n      titleRender: () => (<div><Icon type=\"appstore\" /> 任务备注</div>),\r\n      transition: true,\r\n      content: (\r\n        <Remarks {...remarksProps} />\r\n      ),\r\n      maskClosable: true,\r\n      footerRender: () => null\r\n    })\r\n  }, [onChange, index]);\r\n  return (\r\n    <Card hoverable bodyStyle={cardBodyStyle}>\r\n      <div className={`${prefixCls}-layout`}>\r\n        <div className={`${prefixCls}-title-index ${prefixCls}-bold`}>\r\n          {indexMap[index]}、\r\n        </div>\r\n        <TextEdit\r\n          bold\r\n          prefixCls={prefixCls}\r\n          value={name}\r\n          onConfirm={onTextChange}\r\n        />\r\n      </div>\r\n      { !isFold && list.map((val, ind) => (\r\n          <Item\r\n            key={ind}\r\n            prefixCls={prefixCls}\r\n            item={val}\r\n            onTextChange={value => onItemTextChange(value, ind)}\r\n            onRemarksChange={() => onRemarksChange(ind)}\r\n            onItemDelete={() => onItemDelete(ind)}\r\n          />\r\n        ))\r\n      }\r\n      <div className={`${prefixCls}-options`}>\r\n        <Icon type=\"up-circle\" onClick={handleFold} className={`${prefixCls}-options-icon`} style={{transform: isFold && 'rotate(180deg)'}} />\r\n        <Icon type=\"plus-circle\" onClick={addItem} className={`${prefixCls}-options-icon`} />\r\n        <Icon type=\"delete\" onClick={delItem} className={`${prefixCls}-options-icon`} />\r\n      </div>\r\n    </Card>\r\n  )\r\n}\r\n\r\nNotepad.Add = (props: object): React.ReactElement => (\r\n  <AddIcon prefixCls={prefixCls} {...props} />\r\n);\r\n\r\nexport default Notepad;\r\n","import React, {Fragment, Component} from 'react';\r\nimport {Card, Icon, Tag} from 'antd';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport Notepad from '@/components/Notepad';\r\nimport {generateUUID} from '@/utils/';\r\nimport {queryListData, updateListData} from '@/services';\r\nimport styles from './index.module.less';\r\n\r\nconst tags = ['分层级', '备忘录', '任务指标', '细化任务']\r\nconst {Add} = Notepad;\r\n\r\nclass Medo extends Component {\r\n  state = {\r\n    targetIndex: -1,\r\n    data: [],\r\n    set: [],\r\n    map: {},\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData = async () => {\r\n    let data = [];\r\n    try {\r\n      data = await queryListData();\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      this.setState({ data });\r\n    }\r\n  }\r\n\r\n  setData = async list => {\r\n    await updateListData({ list });\r\n  }\r\n\r\n  formatData = (data) => {\r\n    if (!data) data = this.state.data;\r\n    let set = [], map = {};\r\n    data.forEach(value => {\r\n      set.push(value.id);\r\n      map[value.id] = value;\r\n    });\r\n    this.setState({set, map});\r\n  }\r\n  /**\r\n   * flag: 0 - add; 1 - change; 2 - delete; 3 - change remarks;\r\n   * map: {'index': 'father-location', 'childrenIndex': 'children-location'}\r\n   */\r\n  handleNotepadItem = (flag, {index, childrenIndex, target}) => {\r\n    const {data} = this.state;\r\n    console.log(flag, index, childrenIndex, target);\r\n    switch (flag) {\r\n      case 0:\r\n        if (typeof index !== 'undefined') {\r\n          data[index].children.push({\r\n            name: '',\r\n            createTime: new Date(),\r\n            remarks: [],\r\n          })\r\n        } else {\r\n          data.push({\r\n            id: generateUUID(),\r\n            name: '',\r\n            createTime: new Date(),\r\n            children: [],\r\n          })\r\n        }\r\n        break;\r\n      case 1:\r\n        if (typeof childrenIndex !== 'undefined') {\r\n          data[index].children[childrenIndex].name = target;\r\n        } else {\r\n          data[index].name = target;\r\n        }\r\n        break;\r\n      case 2:\r\n        if (typeof childrenIndex !== 'undefined') {\r\n          data[index].children.splice(childrenIndex, 1);\r\n        } else {\r\n          data.splice(index, 1);\r\n        }\r\n        break;\r\n      case 3:\r\n        data[index].children[childrenIndex].remarks = target;\r\n        break;\r\n    }\r\n    this.setState({data}, () => {\r\n      this.setData(data);\r\n    })\r\n  }\r\n\r\n  addNewItem = () => {\r\n    this.handleNotepadItem(0, {});\r\n  }\r\n\r\n  emptyRender = () => {\r\n    return (\r\n      <Card className={styles.empty}>\r\n        <div className={styles.title}>思维导图式待办事项</div>\r\n        {tags.map((value, index) => (\r\n          <div key={index} className={styles.tag}>{value}</div>\r\n        ))}\r\n        <div className={styles.tips}>立刻开始记事之旅 <Icon type=\"caret-down\" /></div>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const {data} = this.state;\r\n    return (\r\n      <div className={styles.layout}>\r\n        {data.map((value, index) => (\r\n          <Notepad\r\n            key={value.id}\r\n            index={index}\r\n            name={value.name}\r\n            list={value.children}\r\n            onChange={this.handleNotepadItem}\r\n          />\r\n        ))}\r\n        {data.length === 0 && this.emptyRender()}\r\n        <Add onClick={this.addNewItem} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Medo;\r\n"],"sourceRoot":""}